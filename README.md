# Loan Approval Predictor

A Streamlit app that predicts whether a loan application will be **approved** or **not approved** using a machine learning pipeline and Logistic Regression.

**Live app:** [View the app](loan-approval-predictor-ytlt6dny7nvrvmayddlov5.streamlit.app) 
---

## What This Project Is About

This app is a **loan approval classifier**. You can:

- **Train a model** on loan data (default dataset or your own CSV).
- **View performance** — accuracy, precision, recall, F1-score, classification report, and confusion matrix.
- **Predict in real time** — enter applicant details in the form and get an approval prediction with probability.

The model uses applicant and loan features (income, credit score, employment type, bank, etc.) to predict the binary outcome: **approved (1)** or **not approved (0)**.

---

## How It Works

1. **Data**
   - The app loads a loan dataset (default: `loan_dataset_cleaned.csv` or `loan_dataset.csv`).
   - You can **upload your own CSV** in the sidebar; it is **cached** for the session so you don’t have to re-upload on every interaction.

2. **Preprocessing (Pipeline)**
   - **Numeric features** (age, income, credit score, loan amount, tenure, existing loans, default history, has credit card) are scaled with **StandardScaler**.
   - **Categorical features** (gender, city, employment type, bank) are encoded with **OneHotEncoder**.
   - A **ColumnTransformer** applies these steps in a single pipeline.

3. **Model**
   - **Logistic Regression** is trained on an 80/20 train–test split (stratified).
   - The full flow is: **raw data → preprocessor → classifier** in one **sklearn Pipeline**.

4. **Evaluation**
   - **Metrics**: Accuracy, Precision, Recall, F1-Score.
   - **Classification report** in table form (precision, recall, F1-score, support per class).
   - **Confusion matrix** heatmap (Actual vs Predicted).

5. **Prediction**
   - In the **Predict** tab you enter applicant details (gender, city, income, credit score, loan amount, etc.).
   - The app outputs **Approved** or **Not Approved** and the **probability of approval**.

---

## Project Structure

| File / Folder        | Purpose |
|----------------------|--------|
| `app.py`             | Main Streamlit app (data load, pipeline, training, metrics, prediction UI). |
| `loan_dataset.csv`   | Default loan dataset. |
| `loan_dataset_cleaned.csv` | Cleaned version (optional; generated by `preprocess_data.py`). |
| `preprocess_data.py` | Script to clean the CSV (drop unnecessary columns, validate numerics, remove invalid rows). |
| `requirements.txt`   | Python dependencies for running and deploying the app. |

---

## Dataset Requirements

If you **upload your own CSV**, it must include these columns:

- **Target:** `approved` (0 or 1)
- **Categorical:** `gender`, `city`, `employment_type`, `bank`
- **Numeric:** `age`, `monthly_income_pkr`, `credit_score`, `loan_amount_pkr`, `loan_tenure_months`, `existing_loans`, `default_history`, `has_credit_card`

Optional: `applicant_name` (dropped before training). The app validates the uploaded file and falls back to the default dataset if required columns are missing.

---

## Run Locally

```bash
pip install -r requirements.txt
streamlit run app.py
```

Then open the URL shown in the terminal (e.g. `http://localhost:8501`).

---

## Summary

| Item | Description |
|------|-------------|
| **Goal** | Predict loan approval (yes/no) from applicant and loan features. |
| **Model** | Logistic Regression inside an sklearn Pipeline. |
| **Preprocessing** | ColumnTransformer: StandardScaler (numeric) + OneHotEncoder (categorical). |
| **UI** | Sidebar (CSV upload + cache), tabs for Metrics, Predict, and Dataset Info. |
